{% extends "base.html" %}
{% block content %}
<a class="text-blue-600 hover:underline text-sm" href="{{ url_for('person_detail', id=person_id) }}">← 戻る</a>
<div class="space-y-3">
  <div>
    <p class="text-sm uppercase tracking-wide text-slate-500">person</p>
    <h1 class="text-2xl font-bold text-slate-900">出席者として紐づいています</h1>
    <p class="text-slate-600 text-sm">id: {{ person_id }}</p>
  </div>
  <div class="p-3 border rounded bg-white shadow-sm">
    <p class="text-sm text-slate-700 mb-2">以下の会議から出席者を外すか確認してください。</p>
    <ul class="list-disc pl-5 space-y-1 text-slate-800">
      {% for m in meetings %}
      <li>
        <a class="text-blue-600 hover:underline" href="{{ url_for('meeting_detail', id=m.id) }}">
          {{ group_map.get(m.main.group_id, m.main.group_id) }} / #{{ m.main.num }} / {{ m.date }}
        </a>
      </li>
      {% endfor %}
    </ul>
  </div>
  <form method="POST" action="{{ url_for('person_delete', id=person_id) }}" class="space-y-2">
    <input type="hidden" name="confirm" value="yes">
    <label class="inline-flex items-center space-x-2 text-sm text-slate-700">
      <input type="checkbox" name="remove_attendance" class="border rounded">
      <span>上記会議からこの出席者を外してから削除する</span>
    </label>
    <div class="space-x-2">
      <button type="submit" class="bg-red-600 text-white px-4 py-2 rounded shadow hover:opacity-90">削除を実行</button>
      <a href="{{ url_for('person_detail', id=person_id) }}" class="text-blue-600 hover:underline">キャンセル</a>
    </div>
  </form>
</div>
{% endblock %}

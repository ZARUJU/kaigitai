# Flask管理UI仕様（ドラフト）

## 1. 目的
- JSON直接編集ではなく、フォーム経由でCRUDを行う管理UIを提供する
- デザインは Tailwind（CDN利用）でシンプルに整える

## 2. ルーティング（案）
- `GET /health` : ヘルスチェック
- `GET /` : トップ。エンティティ選択へのリンク
- 一覧/詳細/CRUD（フォーム操作。JSON直接編集はしない）
  - `GET /group` : group一覧
  - `GET /group/tree` : group親子構造のツリー表示
  - `GET /group/<id>/children` : 指定団体配下のツリー表示
  - `GET /group/<id>` : group詳細
  - `GET /group/<id>/edit` / `POST /group/<id>/edit` : 個別編集
  - `GET /group/new` / `POST /group/new` : 新規作成
  - `POST /group/<id>/delete` : 削除（確認付き）
  - `GET /person` : person一覧
  - `GET /person/<id>` / `GET,POST /person/<id>/edit` / `GET,POST /person/new` / `POST /person/<id>/delete`
  - `GET /meeting` : meeting一覧（検索/ソート）
  - `GET /meeting/<id>` : meeting詳細（basic.jsonベース）
  - `GET,POST /meeting/<id>/edit` / `GET,POST /meeting/new` / `POST /meeting/<id>/delete`
  - person削除時：attendeeとして紐づく会議がある場合、確認ページを表示し、会議から外すオプションを提示

※ 既存の `/data/...` プレフィックスは廃止し、シンプルに `/group/<id>` などに統一する

## 3. 画面
- トップ：エンティティ選択（group/person/meeting）
- 一覧：カード/リストでIDや主要情報を表示（meetingは検索/ソート付き）
- 詳細：
  - group/person：主要フィールド（name, category, parent, official_url / name, name_yomi）を整形表示し、親リンクや関連会議を表示
  - meeting：main/sub、date、holding、agendaリスト、attendeesリスト（リンク付き）、sources/materials を整形表示
- 新規/編集：
  - group/person：フォーム入力で保存（IDは自動採番）
  - meeting：フォーム入力（main/sub/agenda/attendee/sources/materialsは入力補助、JSON貼り付け不要。attendee/subは行追加/削除、datalistは `name (id)` 表示）
- 削除：
  - person削除時はattendeeに含まれる会議一覧を提示し、会議から外すオプション付きで確認
- フォームバリデーション：ブラウザ標準の required / pattern / number / url を活用（date, time, num, URLなど）

## 4. デザイン
- Tailwind CDN 使用
- テンプレート構成方針：`templates/` 配下に共通レイアウトと部分テンプレートを配置（例：`base.html`、`components/card.html`、`register/form.html`、`data/list.html`、`data/detail.html`）。Flaskの `render_template` を使う方向に移行し、インラインテンプレートは最小化する
- コンポーネント分割：カード・リスト・ラベルなどを部分テンプレート化し再利用する
- ベースレイアウト：
```html
<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  </head>
  <body class="bg-slate-50 text-slate-900">
    <main class="max-w-5xl mx-auto p-6 space-y-4">
      <!-- コンテンツ -->
    </main>
  </body>
</html>
```
- コンポーネント例：カード（rounded-lg, shadow-sm, border, p-4）、ボタン（bg-blue-600 text-white rounded px-3 py-2 hover:opacity-90）、テキストエリア（font-mono, w-full, border, rounded, p-2）
- ソース/資料/参加者は箇条書きリストで表示

## 5. バリデーションと保存
- フロント：required / pattern / type="url"/number 等のブラウザ標準バリデーションを利用
- サーバ：保存前に JSON Schema で検証（register/data スキーマの data 版）
- 成功時：data配下に保存し、詳細画面へリダイレクト
- 失敗時：エラーを表示し、入力内容を保持

## 6. 今後拡張
- meeting拡張ファイル（逐語録など）の表示
- 検索/フィルタの高度化（条件絞り込み、日付レンジなど）
- API（FastAPI）の読み取り専用実装と連携（別タスク）
